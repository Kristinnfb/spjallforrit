<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/style.css">
    <title>Anddyrið</title>
</head>
<body>

    <div class="intro-container">
        <header class="intro-header" >
            <h3 for="password">Hægan góði!! Þú ferð ekki hér inn nema að slá inn password</h3>
        </header>
        <main class="intro-main">
            <form id="mainPasswordForm" action="">
                <div class="form-control">
                    <label for="password">Lykilorð</label>
                    <input
                        type="password"
                        name="password"
                        id="password"
                        placeholder="Sláðu inn Lykilorð"
                        required
                    />
                </div>
                <button type="submit" class="btn" >Innskráning</button>
            </form>
        </main>
    </div>

    <script>
        const mainPasswordForm = document.getElementById("mainPasswordForm")
        mainPasswordForm.addEventListener('submit', (event) => {
            event.preventDefault();
            fetch("/password", {
                method: "POST",
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({mainPassword: event.target.elements.password.value})
            }).then(res => {
                if(res.status === 200)
                    window.location = "/login"
                else
                    alert("Þú hefur slegið inn rangt lykilorð")
            });
        });
    </script>
</body>
</html>
